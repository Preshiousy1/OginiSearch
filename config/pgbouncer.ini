[databases]
ogini_search_dev = host=postgres port=5432 dbname=ogini_search_dev user=postgres password=postgres

[pgbouncer]
# Connection pooling mode - transaction is safest
pool_mode = transaction

# Listen settings
listen_addr = 0.0.0.0
listen_port = 6432

# Authentication
auth_type = trust
auth_file = /etc/pgbouncer/userlist.txt

# Admin access
admin_users = postgres
stats_users = postgres

# Optimized pool settings for search performance
default_pool_size = 20
min_pool_size = 10
reserve_pool_size = 10
max_client_conn = 100
max_db_connections = 50

# Connection settings
server_round_robin = 1
ignore_startup_parameters = extra_float_digits

# Optimized timeouts for search workloads
server_connect_timeout = 10
server_login_retry = 10
query_timeout = 0
query_wait_timeout = 60
client_idle_timeout = 0
server_idle_timeout = 300
server_lifetime = 1800
client_login_timeout = 30

# Enhanced logging for performance monitoring
log_connections = 1
log_disconnections = 1
log_pooler_errors = 1
log_stats = 1

# Performance optimizations
application_name_add_host = 1
server_reset_query = DISCARD ALL
server_check_query = SELECT 1
server_check_delay = 30 